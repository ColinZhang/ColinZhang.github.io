<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Quotation concept in Unix Shell</title>
  <meta name="author" content="Fan">



  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link href="/favicon.ico" rel="icon">
  <link href="/theme/css/main.css" media="screen, projection"
        rel="stylesheet" type="text/css">
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
  <script src="/theme/js/modernizr-2.0.js"></script>
  <script src="/theme/js/ender.js"></script>
  <script src="/theme/js/octopress.js" type="text/javascript"></script>
  <script src="/theme/js/main.js" type="text/javascript"></script>
  <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
</head>

<body>
  <header role="banner"><h1><a href="/">bl4ck5un</a></h1>
  <h2>Less is more</h2>
</header>
  <nav role="navigation"><ul class="main-navigation">
    <li><a href="/index.html">["home"]</a></li>
    <li><a href="/category/blogs.html">["blogs"]</a></li>
    <li><a href="/pages/about-me.html">["about"]</a></li>
    <li><a href="/archives.html">["archive"]</a></li>
</ul></nav>
  <div id="main">
    <div id="content">
<div>
  <article class="hentry" role="article">
<header>
    <h1 class="entry-title">Quotation concept in Unix Shell</h1>
</header>

<p class="meta-up">
<span class="byline author vcard">
Posted by <span class="fn">Fan</span>
</span>
<time datetime="2014-02-14T00:00:00" pubdate>2014-02-14</time><span class="categories">
<i class="fa fa-tags"></i>
<a class="category" href="/tag/shell.html">Shell</a>
</span>
</p>
<div class="entry-content">
    <!-- reuse summary -->
    <p class="first last">Tell me how to quote.</p>

    <p>The basic actions of the shell are simple. It reads a line. This is
either from a file, a script, or from a user.</p>
<ul class="simple">
<li>First, meta-characters are &quot;handled.&quot;</li>
<li>Second, the name of the executable is found.</li>
<li>Third, the arguments are passed to the program.</li>
<li>Fourth, the file redirection is setup.</li>
<li>Lastly, the program is executed.</li>
</ul>
<div class="section" id="meta-characters-and-filename-expansion">
<h2>Meta-characters and Filename expansion</h2>
<p>This includes <strong>variable evaluation</strong> (variables start with a <cite>$</cite>), and
<strong>filename expansion</strong>.</p>
</div>
<div class="section" id="quotation">
<h2>Quotation</h2>
<p>Why quote at all, and what do I mean by quoting? Well, the shell
understands many special characters, called <cite>meta-characters</cite>. These
each have a purpose, and there are so many, beginners often suffer from
meta-itis. Example: The dollar sign(<cite>$</cite>) is a meta-character, and tells
the shell the next word is a variable. If you wanted to use the dollar
sign as a regular character, how can you tell the shell the dollar sign
does not indicate a variable? Answer: the dollar sign must be
<strong>quoted</strong>. Why? <strong>Quoted characters do not have a special meaning.</strong></p>
<p>&gt; Quoted characters do not have a special meaning.</p>
<p>A surprising number of characters have special meanings. The lowly
space, often forgotten in many books, is an extremely important
meta-character. Consider the following</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre>rm -i file1 file2
</pre></div>
</td></tr></table><p>The shell breaks this line up to four words, which can be logically
divided into two classes.</p>
<ol class="arabic simple">
<li><cite>rm</cite> is program to execute</li>
<li><cite>-i</cite>, <cite>file1</cite>, <cite>file2</cite> are parameters or arguments, which will be
passed to <cite>rm</cite> before it runs.</li>
</ol>
<p>To shell, there is no difference between <cite>-i</cite> and <cite>file1</cite>, except that
it follows convention that options begin with a hyphen, like <cite>-i</cite>. All
shell cares is to extract four words from the line, then find the
executable <cite>rm</cite> and pass the other three parameters to it. However, when
you input the quoted version, it will be another story</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre>rm -i <span class="s1">&#39;file1 file2&#39;</span>
</pre></div>
</td></tr></table><p>Note that, &quot;quoted characters do not have a special meaning&quot; , so does
the space between 'file1' and 'file2'. DO NOT perceive 'file1 file2' as
a string in C or any other programming languages. <strong>There is no concept
of C-like string in shell</strong> and don't even try to make the metaphor,
which is often overlooked by beginners yet extremely important to keep
in mind, in order to understand quotation correctly.</p>
<p>A more accurate description of the quoting is a <strong>switch</strong>, or toggle --
it turns on and off the quotation status whether the meta-characters
within text are getting to be interpreted. Therefore, following
variations are all equivalent</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre>rm <span class="s1">&#39;file1 file2&#39;</span>
rm file1<span class="s1">&#39; &#39;</span>file2
rm f<span class="s1">&#39;ile1 file&#39;</span>2
</pre></div>
</td></tr></table><p>Just remember: There is NO concept of string in shell at all.</p>
</div>
<div class="section" id="strong-versus-weak-quoting">
<h2>Strong versus weak quoting</h2>
<p>Simple enough,</p>
<ul class="simple">
<li><cite>&quot;</cite> is weakest: backslash(<cite>`), dollar sign(`$</cite>), and the
back-stick(``) all keep effective inside the double quotation.</li>
<li><cite>'</cite> is strongest: single quotation returns everything inside the
quotation literally.</li>
</ul>
</div>
<div class="section" id="nested-quotation">
<h2>Nested quotation</h2>
<p>Once you have fully understood that The quotation marks in the Bourne
shell are not used to define a string, but to <strong>disable</strong> or <strong>enable</strong>
interpretation of meta-characters, it's easy and intuitive to play with
so called 'nested quotation'</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span class="nv">$ </span><span class="nb">echo</span> <span class="s1">&#39;Strong quotes use &#39;</span><span class="s2">&quot;&#39;&quot;</span><span class="s1">&#39; and weak quotes use &quot;&#39;</span>
Strong quotes use <span class="err">&#39;</span> and weak quotes use <span class="err">&quot;</span>
</pre></div>
</td></tr></table><p>Above example tells all story about nested quotation. Equivalently</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span class="nv">$ </span><span class="nb">echo</span> <span class="s1">&#39;&quot;&#39;</span><span class="s2">&quot;&#39;&quot;</span>
</pre></div>
</td></tr></table><p>simply gives <cite>&quot;'</cite>.</p>
</div>
<div class="section" id="some-tricky-cases">
<h2>some tricky cases</h2>
<p>There are always chances for you to use nested quotation in composing a
program. What makes it tricky is that the order of quotation matters,
let's look at something live</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span class="nv">$perl</span> -e <span class="s2">&quot;print(&#39;hello world&#39;)&quot;</span>
hello world<span class="err">$</span>
</pre></div>
</td></tr></table><p>Printing hello world as we excepted, but Where is the $ from? No magic,
it is the beginning of the next line, because the absence of
<cite>line switch</cite> at the tail of 'hello world'. You might think following is
fine</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span class="nv">$perl</span> -e <span class="s2">&quot;print(&#39;hello world\n&#39;)&quot;</span>
hello world<span class="se">\n</span><span class="err">$</span>
</pre></div>
</td></tr></table><p>But it isn't. Single quotation scapes 'n' as Perl string syntax
specified (NOTE, n is an escape chatachter defined by programing
language, which has nothing to do with quotation in shell). In this
cases, following is the way to set it right</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span class="nv">$perl</span> -e <span class="s1">&#39;print(&quot;hello world\n&quot;)&#39;</span>
hello world
</pre></div>
</td></tr></table><p>Another question worthy of thinking is, will
<cite>perl -e print(&quot;hello worldn&quot;)</cite> works? Now that <cite>'a'</cite> has no difference
with <cite>a</cite> to shell, why <cite>'print(&quot;hello worldn&quot;)'</cite> works while
<cite>print(&quot;hello worldn&quot;)</cite> doesn't? Here is the result</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span class="nv">$perl</span> -e print<span class="o">(</span><span class="s2">&quot;hello world\n&quot;</span><span class="o">)</span>
Unknown file attribute.
</pre></div>
</td></tr></table></div>
<div class="section" id="what-s-next">
<h2>What's next</h2>
<p>I'm planning to write something about <strong>escape character versus
quotation</strong> later.</p>
</div>

</div>
    <footer>
      <p class="meta">
<span class="byline author vcard">
Posted by <span class="fn">Fan</span>
</span>
<time datetime="2014-02-14T00:00:00" pubdate>2014-02-14</time><span class="categories">
<i class="fa fa-tags"></i>
<a class="category" href="/tag/shell.html">Shell</a>
</span>
      </p>
<div class="sharing">
</div>    </footer>
  </article>

</div>
      <!--<aside class="sidebar">
<section class="aside-about">
    <div class="avatar"></div>
    <span class="aside-name">Fan Zhang</span>
    <ul class="sns">
            <li><a href="https://github.com/cmade" title="Fork me on Github"><i class="fa fa-github-alt fa-2x"></i></a></li>
            <li><a href="http://www.linkedin.com/profile/view?id={who}" title="LinkedIn"><i class="fa fa-linkedin-square fa-2x"></i></a></li>
            <li><a href="https://plus.google.com/{who}" title="Plus me"><i class="fa fa-google-plus-square fa-2x"></i></a></li>
            <li><a href="mailto:colin.zhang1992@gmail.com" title="Write to me"><i class="fa fa-envelope fa-2x"></i></a></li>
    </ul>
    <div class="spacer"></div>
</section>    <section>
        <h1>Recent Posts</h1>
        <ul id="recent_posts">
            <li class="post">
                <a href="/posts/2014/04/CVE-2013-1763/">CVE-2013-1763</a>
            </li>
            <li class="post">
                <a href="/posts/2014/04/CVE-2014-0038/">CVE-2014-0038</a>
            </li>
            <li class="post">
                <a href="/posts/2014/04/why-heart-bleeds/">Why Heart Bleeds</a>
            </li>
            <li class="post">
                <a href="/posts/2014/03/python-descriptor-by-example/">Python Descriptor by Example</a>
            </li>
            <li class="post">
                <a href="/posts/2014/02/quotation-concept-in-unix-shell/">Quotation concept in Unix Shell</a>
            </li>
        </ul>
    </section>
    <section>

    <h1>Categories</h1>
    <ul id="recent_posts">
        <li><a href="/category/blogs.html">blogs</a></li>
    </ul>
</section>

<section>
    <h1>Tags</h1>
    <a href="/tag/shell.html">Shell</a>,    <a href="/tag/networking.html">Networking</a>,    <a href="/tag/socket.html">Socket</a>,    <a href="/tag/ssl.html">SSL</a>,    <a href="/tag/python.html">Python</a>,    <a href="/tag/python-descriptor.html">Python descriptor</a>,    <a href="/tag/security.html">Security</a></section>



</aside>-->
    </div>
  </div>
  <footer role="contentinfo"><p>
      Copyright &copy; 2014 - Fan -
  <span class="credit">Powered by <a href="http://getpelican.com">Pelican</a></span>
</p></footer>
</body>
</html>